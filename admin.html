<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Virtual Queue â€” Admin</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 18px; }
    #peakChart { max-width: 760px; display:block; margin: 18px auto; }
    .small-muted { color: #666; font-size: .9rem; }
  </style>
</head>
<body class="p-4">
  <div class="container">
    <h1 class="mb-3">Admin Dashboard</h1>

    <div class="mb-3 d-flex align-items-center gap-2">
      <select id="admin-location" class="form-select w-50">
        <option value="templeA">Temple A</option>
        <option value="canteen1">Canteen 1</option>
      </select>
      <button id="callNextBtn" class="btn btn-success">Call Next</button>
      <button id="refreshBtn" class="btn btn-secondary">Refresh</button>
    </div>

    <table class="table table-striped">
      <thead>
        <tr><th style="width:90px">Number</th><th>Name</th><th style="width:120px">Status</th><th style="width:140px">Actions</th></tr>
      </thead>
      <tbody id="queue-body"></tbody>
    </table>

    <hr/>
    <h5>Current serving: <span id="admin-serving">-</span></h5>
    <p class="small-muted">Click "Call Next" to call the smallest waiting number.</p>

    <!-- ===== Queue Analytics Section ===== -->
    <hr>
    <h3 class="mt-4">Queue Analytics</h3>
    <h5 class="mb-1">Average Waiting Time: <span id="avgWait" class="fw-bold">Calculating...</span></h5>
    <small class="small-muted">(based on history entries)</small>

    <div style="width: 80%; max-width: 700px; margin-top: 20px;">
      <canvas id="peakChart"></canvas>
    </div>
    <!-- ================================================================ -->

  </div>

  <!-- Chart.js Library (must load before admin.js uses Chart) -->
  <!-- Chart.js UMD build (works with ES modules + global Chart) -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script type="module" src="admin.js"></script>

</body>
</html>


